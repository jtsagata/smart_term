# Description: Themes for terminals
# More info:   https://github.com/lemnos/theme.sh

# shellcheck shell=bash
if [ "${BASH_SOURCE[0]}" -ef "$0" ]
then
    echo "Hey, you should source this script, not execute it!"
    exit 1
fi


# shellcheck disable=SC2220
while getopts ":i" arg; do
    case ${arg} in
        i)
            echo "Installing Theme.sh"
            # TODO: source common and use runst_install function
            sudo apt install fzf
            _where="$AUTOMATION_DIR/bin/shell_theme"
            curl  -s -Lo "${_where}" 'https://raw.githubusercontent.com/lemnos/theme.sh/master/bin/theme.sh' 
            chmod +x "${_where}"
            unset _where
            ;;
    esac;
done

function load_last_theme() {
    local cmd="shell_theme"
    local theme
    theme=$($cmd -l|tail -n1)
    "$cmd" "$theme"
    export TERMINAL_THEME=$theme
}

load_last_theme